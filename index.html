<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WPA Slave Narratives Analysis</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Georgia', serif;
            background-color: #f8f9fa;
        }
        .navbar {
            background-color: #2c3e50 !important;
        }
        .navbar-brand {
            font-weight: bold;
            font-size: 1.5rem;
        }
        .content {
            margin-top: 20px;
            margin-bottom: 40px;
        }
        .card {
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .stat-card {
            text-align: center;
            padding: 20px;
        }
        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: #2c3e50;
        }
        .stat-label {
            color: #7f8c8d;
            font-size: 0.9rem;
            text-transform: uppercase;
        }
        footer {
            background-color: #2c3e50;
            color: white;
            padding: 20px 0;
            margin-top: 40px;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand" href="index.html">WPA Slave Narratives</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="browse.html">Browse Narratives</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="compare.html">Compare States</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container content">
        <div class="row mt-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-body">
                        <h1 class="card-title">WPA Slave Narratives Comparative Analysis</h1>
                        <p class="lead">
                            Explore historical interviews with formerly enslaved people conducted during the 1930s
                            as part of the Federal Writers' Project. This collection includes narratives from five states:
                            Georgia, Florida, Missouri, Texas, and South Carolina.
                        </p>
                        <hr>
                        <p>
                            Use this tool to browse individual narratives, compare themes across states,
                            and discover folklore and folk tales unique to different regions.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <div class="row mt-4">
            <div class="col-12">
                <h2>Collection Overview</h2>
            </div>
        </div>

        <div id="statsContainer" class="row">
            <div class="col-12 text-center">
                <div class="spinner-border" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
            </div>
        </div>

        <div class="row mt-4">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-body">
                        <h3>Browse Narratives</h3>
                        <p>Read individual narratives and filter by state, name, or text length.</p>
                        <a href="browse.html" class="btn btn-primary">Browse Now</a>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card">
                    <div class="card-body">
                        <h3>Compare States</h3>
                        <p>Analyze theme distribution and folklore across different states.</p>
                        <a href="compare.html" class="btn btn-primary">Compare Now</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="row mt-5">
            <div class="col-12">
                <div class="card">
                    <div class="card-body">
                        <h3>About This Project</h3>
                        <p>
                            The Federal Writers' Project was a New Deal program that employed writers during
                            the Great Depression. Between 1936 and 1938, project workers interviewed over
                            2,300 formerly enslaved people across 17 states, creating an invaluable record
                            of first-hand accounts of American slavery.
                        </p>
                        <p>
                            This analysis tool provides comparative insights into the narratives, allowing
                            researchers and interested readers to explore regional differences in themes,
                            folklore, and storytelling patterns.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="container text-center">
            <p class="mb-0">WPA Federal Writers' Project Slave Narratives (1936-1938)</p>
            <p class="mb-0"><small>Historical documents from Project Gutenberg</small></p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Load comparative stats
        fetch('data/comparative_stats.json')
            .then(response => response.json())
            .then(stats => {
                const container = document.getElementById('statsContainer');
                container.innerHTML = '';

                for (const [state, data] of Object.entries(stats)) {
                    const col = document.createElement('div');
                    col.className = 'col-md-6 col-lg-4 mb-3';
                    col.innerHTML = `
                        <div class="card stat-card">
                            <h3>${state}</h3>
                            <div class="stat-number">${data.narrative_count}</div>
                            <div class="stat-label">Narratives</div>
                            <hr>
                            <p class="mb-1"><strong>${data.total_words.toLocaleString()}</strong> total words</p>
                            <p class="mb-1"><strong>${Math.round(data.avg_narrative_length).toLocaleString()}</strong> avg. words/narrative</p>
                            <p class="mb-0"><small>Range: ${data.shortest_narrative} - ${data.longest_narrative} words</small></p>
                        </div>
                    `;
                    container.appendChild(col);
                }
            })
            .catch(error => {
                console.error('Error loading stats:', error);
                document.getElementById('statsContainer').innerHTML = `
                    <div class="col-12">
                        <div class="alert alert-warning">
                            Unable to load statistics. Please ensure you've run the analysis script first:
                            <code>python src/analyze_narratives.py</code>
                        </div>
                    </div>
                `;
            });
    </script>
</body>
</html>
